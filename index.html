<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<link rel="stylesheet" href="style.css">
	<title>MYGAME</title>
</head>
<body>
	<div class="entermenu">
		<img src="img/background.png" alt="" id="background" class="img">
		<img src="img/background1.png" alt="" id="background1" class="img" style="display: none; bottom: -50px;">
		<div><a id="btnenter" class="btnenter">ВХОД</a></div>
		<div id="circle" class="circle" style="display: none;"></div>
	</div>
	<div id="container" class="container" style="display: none;">
		<div class="ui-top">
			<div class="ui-counter">
				<img with="28px" height="28px" src="img\coin.png">
				<div class="value-text noselect">
					<div class="g-text">$COIN</div>
					<div class="v-text" id="balance">0</div>
				</div>
			</div>
			<div class="ui-counter">
				<img with="28px" height="28px" src="img\ton.png">
				<div class="value-text noselect">
					<div class="g-text">$TON</div>
					<div id="ton-count" class="v-text">0</div>
				</div>
			</div>
			<div class="ui-counter" id="ton-connect">
			</div>
		</div>
        <div class="moving-box" style="
        position: absolute;
        width: 384px;
        margin: 41vh 0 0 0;
    ">
		<canvas id="canvas" style="position: relative;width: 100%;height: 30vh;">
			<img id="cow_buti" class="cow" src="img\imggus\chiken1.png" style="position: absolute; top: 0; left: 0; width: 80px; padding: 5px;">
		</canvas>
		<img src="img/object.png" alt="" id="objectbtn" class="img" style="top: 50%; left: 50%;">
	</div>
	</div>
	<div id="collectobject" class="collectobject">
		<div class="text">Поздравляем! Вы успешно получили 0 COIN</div>
	</div>
	<div id="ton-connect"></div>
	<script src="https://telegram.org/js/telegram-web-app.js"></script>
	<script src="https://unpkg.com/@tonconnect/ui@0.0.9/dist/tonconnect-ui.min.js"></script>
	<script src="app.js"></script>
	<div class="viewport-stable_border"></div>
	<script>
        var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext("2d");
		const cow_buti = document.getElementById("cow_buti");
		var posX = 15;
		var speedX = 1;
		var posY = 10;
		var speedY = 3;

		function drawBall() {

			if (posY + speedY > canvas.height) {
				speedY = -3;
			} else if (posX + speedX > canvas.width) {
				speedX = -1;
			} else if (posY + speedY < 0) {
				speedY = 3;
			} else if (posX + speedX < 0) {
				speedX = 1;
			}
			ctx.beginPath();
			ctx.drawImage(cow_buti, posX, posY);
			ctx.closePath();
		}

		function draw() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			drawBall();
			posX += speedX
			posY += speedY

		}

		setInterval(draw, 4000/60);


		const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
			manifestUrl: 'https://github.com/OPERS121/xuis.github.io.git/tonconnect-manifest.json',
			buttonRootId: 'ton-connect'

		});

		async function transaction() {
			const transaction = {
				validUntil: Math.round(Date.now() / 1000) + 10,
				messages: [
					{
						address: "0:0",
						amount: "1000"
					}
				]
			};

			try {
				await tonConnectUI.sendTransaction(transaction);
			} catch (e) {
				console.error(e);
			}
		}
	</script>
</body>
</html>